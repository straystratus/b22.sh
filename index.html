<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>b22.sh</title>
    <style>
        body {
            background-color: #1a1a1a;
            color: #f0f0f0;
            font-family: 'Courier New', monospace;
            padding: 20px;
            margin: 0;
            line-height: 1.5;
        }
        
        #terminal {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .prompt {
            color: #4CAF50;
        }
        
        .command {
            color: #64B5F6;
        }
        
        .output {
            margin-bottom: 15px;
            white-space: pre-wrap;
        }
        
        #input-line {
            display: flex;
        }
        
        #command-input {
            background: transparent;
            border: none;
            color: #f0f0f0;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            width: 100%;
            outline: none;
        }
        
        .file {
            color: #FFD54F;
        }
        
        .dir {
            color: #4FC3F7;
        }
        
        .dir::before {
            content: "directory";
        }
        
        .file::before {
            content: "file";
        }
    </style>
</head>
<body>
    <div id="terminal">
        <div class="output">
type 'help' for available commands.
        </div>
        
        <div id="history"></div>
        
        <div id="input-line">
            <span class="prompt">deus@machina:~$ </span>
            <input type="text" id="command-input" autofocus>
        </div>
    </div>

    <script>
        // File system structure matching your screenshot
        const fileSystem = {
            '~': {
                'aboutme': {
                    'contacts': 'Email: contact@b22.dev\nGitHub: @b22terminal',
                    'me': 'I am a developer passionate about creating terminal interfaces.',
                    'readings': 'Current reading list:\n- Clean Code\n- The Pragmatic Programmer'
                },
                'projects': {
                    'p1': 'Project 1: Terminal emulator',
                    'p2': 'Project 2: Web-based filesystem',
                    'p3': 'Project 3: CLI tools collection',
                    'p4': 'Project 4: Documentation generator',
                    'p5': 'Project 5: Automation scripts',
                    'p6': 'Project 6: Experimental prototypes'
                }
            }
        };

        // Current state
        let currentPath = ['~'];
        let commandHistory = [];
        let historyIndex = 0;

        // DOM elements
        const commandInput = document.getElementById('command-input');
        const historyDiv = document.getElementById('history');

        // Available commands
        const commands = {
            'help': {
                description: 'Show this help message',
                execute: () => {
                    let helpText = 'Available commands:\n';
                    for (const cmd in commands) {
                        helpText += `  ${cmd.padEnd(8)} - ${commands[cmd].description}\n`;
                    }
                    return helpText;
                }
            },
            'ls': {
                description: 'List directory contents',
                execute: (args) => {
                    const dir = navigateToPath(args[0] || '');
                    if (typeof dir === 'string') return dir;
                    
                    let output = '';
                    // Sort directories first
                    const items = Object.keys(dir).sort((a, b) => {
                        const aIsDir = typeof dir[a] === 'object';
                        const bIsDir = typeof dir[b] === 'object';
                        return bIsDir - aIsDir || a.localeCompare(b);
                    });
                    
                    items.forEach(item => {
                        const type = typeof dir[item] === 'object' ? 'dir' : 'file';
                        output += `<span class="${type}">${item}</span>  `;
                    });
                    return output;
                }
            },
            'cd': {
                description: 'Change directory',
                execute: (args) => {
                    if (!args[0]) {
                        currentPath = ['~'];
                        return '';
                    }
                    
                    const newPath = args[0] === '..' 
                        ? currentPath.slice(0, -1) 
                        : [...currentPath, args[0]];
                    
                    const dir = navigateToPath(newPath.join('/'));
                    if (typeof dir === 'string') return dir;
                    
                    currentPath = newPath;
                    return '';
                }
            },
            'cat': {
                description: 'Display file contents',
                execute: (args) => {
                    if (!args[0]) return 'Usage: cat <file>';
                    
                    const pathParts = args[0].split('/');
                    const fileName = pathParts.pop();
                    const dirPath = pathParts.join('/');
                    
                    const dir = navigateToPath(dirPath || '.');
                    if (typeof dir === 'string') return dir;
                    
                    if (!dir[fileName]) return `cat: ${args[0]}: No such file`;
                    if (typeof dir[fileName] === 'object') return `cat: ${args[0]}: Is a directory`;
                    
                    return dir[fileName];
                }
            },
            'tree': {
                description: 'Display directory tree',
                execute: (args) => {
                    const path = args[0] || currentPath.join('/');
                    const dir = navigateToPath(path);
                    if (typeof dir === 'string') return dir;
                    
                    let output = '';
                    function buildTree(node, prefix = '') {
                        const keys = Object.keys(node);
                        keys.forEach((key, index) => {
                            const isLast = index === keys.length - 1;
                            output += prefix + (isLast ? '└── ' : '├── ') + key + '\n';
                            if (typeof node[key] === 'object') {
                                buildTree(node[key], prefix + (isLast ? '    ' : '│   '));
                            }
                        });
                    }
                    
                    output += path + '\n';
                    buildTree(dir);
                    return output;
                }
            },
            'clear': {
                description: 'Clear the terminal',
                execute: () => {
                    historyDiv.innerHTML = '';
                    return '';
                }
            },
            'pwd': {
                description: 'Print working directory',
                execute: () => currentPath.join('/')
            }
        };

        // Navigate through file system
        function navigateToPath(path) {
            let dir = fileSystem;
            const pathParts = path ? path.split('/') : [];
            
            for (let part of pathParts) {
                if (part === '' || part === '.') continue;
                if (part === '~') {
                    dir = fileSystem['~'];
                    continue;
                }
                
                if (!dir[part]) return `path: ${path}: No such directory`;
                if (typeof dir[part] !== 'object') return `path: ${path}: Not a directory`;
                
                dir = dir[part];
            }
            
            return dir;
        }

        // Execute commands
        function executeCommand(cmd) {
            const parts = cmd.split(' ');
            const command = parts[0];
            const args = parts.slice(1);
            
            if (!commands[command]) {
                return `${command}: command not found. Type 'help' for available commands.`;
            }
            
            return commands[command].execute(args);
        }

        // Display in terminal
        function printCommand(cmd) {
            const prompt = document.createElement('div');
            prompt.innerHTML = `<span class="prompt">user@b22:${currentPath.join('/')}$ </span><span class="command">${cmd}</span>`;
            historyDiv.appendChild(prompt);
        }

        function printOutput(output) {
            if (!output) return;
            
            const outputDiv = document.createElement('div');
            outputDiv.className = 'output';
            outputDiv.innerHTML = output;
            historyDiv.appendChild(outputDiv);
        }

        // Event handling
        commandInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const cmd = commandInput.value.trim();
                if (cmd) {
                    commandHistory.push(cmd);
                    historyIndex = commandHistory.length;
                    
                    printCommand(cmd);
                    const output = executeCommand(cmd);
                    printOutput(output);
                    
                    commandInput.value = '';
                    
                    // Scroll to bottom
                    window.scrollTo(0, document.body.scrollHeight);
                }
            } else if (e.key === 'ArrowUp') {
                if (historyIndex > 0) {
                    historyIndex--;
                    commandInput.value = commandHistory[historyIndex];
                }
                e.preventDefault();
            } else if (e.key === 'ArrowDown') {
                if (historyIndex < commandHistory.length - 1) {
                    historyIndex++;
                    commandInput.value = commandHistory[historyIndex];
                } else {
                    historyIndex = commandHistory.length;
                    commandInput.value = '';
                }
                e.preventDefault();
            }
        });

        // Focus on input
        document.addEventListener('click', () => {
            commandInput.focus();
        });
    </script>
</body>
</html>
